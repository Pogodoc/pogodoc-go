import { PogodocClient } from "@pogodoc/sdk";
import * as fs from 'fs';

console.log(PogodocClient);


const pogo = new PogodocClient({
    baseUrl: "https://api.pogodoc.com/v1",
    token: process.env.POGODOC_TOKEN,
})

async function render(target) {
    const res = await pogo.generateDocument({
        templateId: "775882f6-3c3f-4300-af0e-1df69c738ed2",
        renderConfig: {
            target: target,
            type: "ejs",
            formatOpts: {
                format: "tabloid"
            }
        },
        shouldWaitForRenderCompletion: true,
        data: {"title":"A Note from Your Child","content":"Dear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everythingwanted to say thank you for everything you do for me. You are the bestDear Mom, I just wanted to say thank you for everything you do for me. You are the best!","senderName":"Petar"}
    });

    return res;
}

async function main() {
    console.log("Hi");

    const arr = new Array(1).fill(0).map(async () => {
        const png = render('png');
        const pdf = render('pdf');
        return Promise.all([pdf, png]);
    });

    const res = await Promise.all(arr);

    fs.writeFileSync("./out.json", JSON.stringify(res, null, 4));
}

main().then(console.log);